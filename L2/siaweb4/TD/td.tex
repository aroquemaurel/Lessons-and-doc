\documentclass[12pt,a4paper,openany]{book}


\usepackage{lmodern}
\usepackage{xcolor}
\input{/home/aroquemaurel/cours/includesLaTeX/couleurs.tex}

\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[francais]{babel}
\usepackage[top=1.7cm, bottom=1.7cm, left=1.7cm, right=1.7cm]{geometry}
\usepackage{verbatim}
\usepackage[urlbordercolor={1 1 1}, linkbordercolor={1 1 1}, linkcolor=vert1, urlcolor=bleu, colorlinks=true]{hyperref}
\usepackage{tikz} %Vectoriel
\usepackage{listings}
\usepackage{fancyhdr}
\usepackage{multido}
\usepackage{amssymb}

\newcommand{\titre}{Système d'informations et applications web -- TD}

\newcommand{\pole}{}
\newcommand{\sigle}{siaweb}

\newcommand{\semestre}{4}
\newcommand{\acount}{\texttt{COUNT}}
\newcommand{\asum}{\texttt{SUM}}

\input{/home/aroquemaurel/cours/includesLaTeX/listings.tex} %prise en charge du langage algo
\input{/home/aroquemaurel/cours/includesLaTeX/l2/cours.tex}
\input{/home/aroquemaurel/cours/includesLaTeX/remarquesExempleAttention.tex}
\input{/home/aroquemaurel/cours/includesLaTeX/polices.tex}
\input{/home/aroquemaurel/cours/includesLaTeX/affichageChapitre.tex}

\begin{document}
	\setcounter{tocdepth}{2}
	\setcounter{secnumdepth}{3}
	\maketitle
	\tableofcontents
	\chapter{Rappel sur le SQL -- LDD/LMD }
	\lstinputlisting[language=SQL]{1.sql}
	\lstinputlisting[language=SQL]{1-1.sql}
	\lstinputlisting[language=SQL]{1-2.sql}
	\lstinputlisting[language=SQL]{1-3.sql}
	\chapter{Projection -- Sélection -- Agrégation}
	\begin{enumerate}
		\item 
			\begin{tabular}{p{8cm}p{4cm}}
			$R = \Pi_{ne}\ equipe$ & $R[ne]$
			\end{tabular}
	\begin{lstlisting}[language=SQL, numbers=none]
select distinct NE from equipe; 
	\end{lstlisting}
	 ~
\item 
			\begin{tabular}{p{8cm}p{4cm}}
		$R=\Pi_{nomP,\; pBudget}(\sigma_{Ne='e1'}\ equipe)$ & $R[nomp,\; pbudget]$
			\end{tabular}
	\begin{lstlisting}[language=SQL, numbers=none]
select distinct nomp, pbudget from projet where ne='e1'; 
select distinct nomp, pbudget from (select * from projets where ne='e1'); 
	\end{lstlisting}
	 ~
\item 
			\begin{tabular}{p{8cm}p{4cm}}
	$R = \Pi_{nomC,\; nc} (\sigma_{nomc\ {like}\ '\%a\%'}\ chercheur)$ & $R[nomc]$
			\end{tabular}
	\begin{lstlisting}[language=SQL, numbers=none]
select distinct nomc from chercheur where nomC like '%a%';
select distinct nomc from (select * from chercheur where nomC like '%a%'); 
	\end{lstlisting}
	 ~
\item 
			\begin{tabular}{p{8cm}p{4cm}}
	$R = \acount(projet,\; ne,\; np)$ & $R[ne,\; count(np)]$ 
			\end{tabular}
	\begin{lstlisting}[language=SQL, numbers=none]
select ne, count(np) as COUNT_NP from projet group by ne;
	\end{lstlisting}
	 ~

	\item 
			\begin{tabular}{p{8cm}p{4cm}}
	$R = \acount(aff,\; np,\; nc)$  & $R[np,\; count(nc)]$
			\end{tabular}
	\begin{lstlisting}[language=SQL, numbers=none]
select np, count(nc) as COUNT_NC from aff group by np;
	\end{lstlisting}
	 ~
	\item 
			\begin{tabular}{p{8cm}p{4cm}}
	$R = \asum(projet,\; ne,\; pBudget)$  & $R[ne,\; count(pBudget)]$
			\end{tabular}
	\begin{lstlisting}[language=SQL, numbers=none]
select ne, sum(pBudget) as SUM_PBUDGET from projet group by ne;
	\end{lstlisting}
	 ~
	\item 
			\begin{tabular}{p{8cm}p{4cm}}
	$R = \acount(aff,\; nc;\; ;\; count(np) = 2)$ & $R[nc]$
			\end{tabular}
	\begin{lstlisting}[language=SQL, numbers=none]
select nc from aff group by nc having count(np) = 2;
	\end{lstlisting}
	\end{enumerate}
	\include{chapitre2}
\end{document}






