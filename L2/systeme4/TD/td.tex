\documentclass[12pt,a4paper,openany]{book}


\usepackage{lmodern}
\usepackage{xcolor}
\input{/home/aroquemaurel/cours/includesLaTeX/couleurs.tex}

\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[francais]{babel}
\usepackage[top=1.7cm, bottom=1.7cm, left=1.7cm, right=1.7cm]{geometry}
\usepackage{verbatim}
\usepackage[urlbordercolor={1 1 1}, linkbordercolor={1 1 1}, linkcolor=vert1, urlcolor=bleu, colorlinks=true]{hyperref}
\usepackage{tikz} %Vectoriel
\usepackage{listings}
\usepackage{fancyhdr}
\usepackage{multido}
\usepackage{amssymb}

\newcommand{\titre}{Systèmes 2 --- TD}

\newcommand{\pole}{}
\newcommand{\sigle}{systèmes}

\newcommand{\semestre}{4}

\input{/home/aroquemaurel/cours/includesLaTeX/listings.tex} %prise en charge du langage algo
\input{/home/aroquemaurel/cours/includesLaTeX/entete-l2-cours.tex}
\input{/home/aroquemaurel/cours/includesLaTeX/remarquesExempleAttention.tex}
\input{/home/aroquemaurel/cours/includesLaTeX/polices.tex}
\input{/home/aroquemaurel/cours/includesLaTeX/affichageChapitre.tex}

\begin{document}
	\setcounter{tocdepth}{2}
	\setcounter{secnumdepth}{3}
	\maketitle
	\tableofcontents
	\chapter{Introduction}
		\section{Exercice 1}
		\lstinputlisting[language=C, caption=Exercice 1 -- Version portable]{codes/1.c}
		\lstinputlisting[language=C, caption=Exercice 1 -- Version Unix]{codes/1-2.c}
		\section{Exercice 2}
		\lstinputlisting[language=C, caption=Exercice 2]{codes/2-2.c}
		\lstinputlisting[language=C, caption=Exercice 2 -- Correction]{codes/2.c}
	\chapter{Processus}
		\section{Exercice 3}
		\lstinputlisting[language=C, caption=Exercice 3]{codes/3.c}
		\section{Exercice 4}
		\lstinputlisting[language=C, caption=Exercice 4]{codes/4.c}
		\section{Exercice 5}
\begin{lstlisting}[language=C, numbers=none]
execlp("date", "date", NULL);
\end{lstlisting}
\begin{lstlisting}[language=C, numbers=none]
	Maintenant: 
	vendredi 8 février 2013, 15:13:33 (UTC+0100)
\end{lstlisting}
		\section{Exercice 6}
		Il va afficher deux fois le pid du programme courant.
		\section{Exercice 7}
		\lstinputlisting[language=C, caption=Exercice 7]{codes/7.c}
	\chapter{Gestion de la mémoire: mémoire virtuelle et allocation non contiguë}
		\section{Exercice 8}
		\subsection{}
		\begin{itemize}
			\item \textbf{Pages 2 et 3} $[5 \times 1024 ; 6 \times 1024 -1] = [2048 ; 4095]$ 
			\item \textbf{Page 5} $[7 \times 1024 ; 8 \times 1024 -1] = [5120 ; 6143]$
			\item \textbf{Page 7} $[2 \times 1024 ; 4 \times 1024 -1] = [7168 ; 8191]$
		\end{itemize}
		\subsection{}
		\remarque{Numéro de cadre $\times$ 1024 + décalage}
		\begin{tabular}{c|c|c|c}
			\textbf{Adresse virtuelle} & \textbf{Page virtuelle} & \textbf{Page physique} & \textbf{Adresse physique}\\
			\hline
			0 &  0 & 3 & $3\times 1024=3072$\\
			3728 & 3 & défaut de page & défaut de page\\
			1023 & 0 & 3 & $3 \times 1024 + 1023 = 4095$\\ 
			1024 & 1 & 1 & 1024\\
			1025 & 1 & 1 & 1025\\
			7800 & 7 & défaut de page & défaut de page\\
			4096 & 4 & 2 & 2048
		\end{tabular}
		\section{Exercice 9}
		d: taux de défaut de page.

		\subsection{Temps d'accès moyen}
		$$(1-d) \times 2 \times 0.5 + d \times (20 + 2 \times 0.5) = (1-d)+21d = 1+20d$$
		\subsection{Taux maximal de défaut de page}
		\begin{eqnarray*}
			1 + 20d &<& 1.2\\
			d &<& \frac{0.2}{20}\\
			d &<& 0.01
		\end{eqnarray*}
		\section{Exercice 10}
		\subsection{}
			Chaque processus provoque 5 défauts de page correspondants aux changements initiaux des 5 pages.

			Soit $n$ le nombre de page référencancés par un processus. Le taux de défaut de page est $\frac{5}{n}$.
	\chapter{Structure interne du système de fichier d'Unix}
	\chapter{Primitives Unix (POSIX.1) de manipulation des fichiers}
		\lstinputlisting[language=C, caption=Exercie 16]{codes/16.c}
\end{document}


