\documentclass[12pt,a4paper,openany]{book}


\usepackage{lmodern}
\usepackage{xcolor}
\input{/home/aroquemaurel/cours/includesLaTeX/couleurs.tex}

\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[francais]{babel}
\usepackage[top=1.7cm, bottom=1.7cm, left=1.7cm, right=1.7cm]{geometry}
\usepackage{verbatim}
\usepackage[urlbordercolor={1 1 1}, linkbordercolor={1 1 1}, linkcolor=vert1, urlcolor=bleu, colorlinks=true]{hyperref}
\usepackage{tikz} %Vectoriel
\usepackage{listings}
\usepackage{fancyhdr}
\usepackage{multido}
\usepackage{amssymb}

\newcommand{\titre}{Assembleur ARM -- TD}

\newcommand{\pole}{}
\newcommand{\sigle}{archi}

\newcommand{\semestre}{4}

\input{/home/aroquemaurel/cours/includesLaTeX/listings.tex} %prise en charge du langage algo
\input{/home/aroquemaurel/cours/includesLaTeX/l2/cours.tex}
\input{/home/aroquemaurel/cours/includesLaTeX/remarquesExempleAttention.tex}
\input{/home/aroquemaurel/cours/includesLaTeX/polices.tex}
\input{/home/aroquemaurel/cours/includesLaTeX/affichageChapitre.tex}

\begin{document}
	\setcounter{tocdepth}{2}
	\setcounter{secnumdepth}{3}
	\maketitle
	\tableofcontents
	\chapter{Opérations}
	\lstinputlisting[language=ARM, caption=\texttt{R3 <- R0 + (R1-R2)}]{1-1.s}
	\lstinputlisting[language=ARM, caption=\texttt{R0 <- R1 + R2 + R3}]{1-2.s}

	\lstinputlisting[language=ARM, caption=\texttt{R0 <- R1+(R2-4)}]{1-3.s}

	\lstinputlisting[language=ARM, caption=\texttt{R0 <- R2 + R2*4}]{1-4.s}
	\attention{\texttt{MUL R3,R2,\#4} n'est pas possible}
	\lstinputlisting[language=ARM, caption=\texttt{R0 <- -R1} sous 3 formes différentes]{1-5.s}
	\lstinputlisting[language=ARM, caption=\texttt{R0 <- 10 * R1} sans utiliser la multipliation]{1-6.s}
	\chapter{TD1}
	\section{}
\subsection{}
	ON considère l'algorithme suivant : 
\begin{lstlisting}[language=Algo]
si r0  > 0 alors
	s1;
sinon
	s2;
fin si;
\end{lstlisting}
Traduire cette forme algorithmique en assembleur.
\lstinputlisting[language=ARM]{2.s}
\subsection{}
\begin{lstlisting}[language=Algo]
tantque 0 > 0 faire
	s;
fin tantque;
\end{lstlisting}
\lstinputlisting[language=ARM]{2-1.s}

\section{}
\subsection{}
\lstinputlisting[language=Algo]{2-2.algo}
\lstinputlisting[language=ARM]{2-2.s}
\subsection{}
\'Ecrire un programme qui calcule la multiplication de r0 par r1 et range le résultat dans r2 sans l'opération de multiplication
\subsubsection{Nombres non signés}
\lstinputlisting[language=ARM]{2-3.s}
\subsubsection{Nombres signés}
\lstinputlisting[language=Algo]{2-4.algo}
\lstinputlisting[language=ARM]{2-4.s}
\subsubsection{Autres solutions pour nombres signés}
\lstinputlisting[language=Algo]{2-5.algo}
\lstinputlisting[language=ARM]{2-5.s}
\subsection{Réaliser la division de r0
par r1 qui donne dans r2 le quotient et dans r3
le reste}
\subsubsection{Non signé}
$r0 = r1 \times r2 + 3$, $0 \leq r3 < r1$
\lstinputlisting[numbers=none,language=Algo]{2-6.algo}
\lstinputlisting[numbers=none,language=ARM]{2-6.s}
\subsubsection{Signé}
\lstinputlisting[language=Algo]{2-7.algo}
\lstinputlisting[language=ARM]{2-7.s}
\chapter{TD2 -- Manipulation de la mémoire}
\section{}
\subsubsection{Avec un itérateur}
\begin{tabular}{p{8cm}p{8cm}}
\lstinputlisting[language=Algo,linewidth=8cm]{3-1.algo}
	&
\lstinputlisting[linewidth=8cm,language=ARM]{3-1.s}
\end{tabular}
\subsection{Avec un pointeur}
\begin{tabular}{p{6cm}p{6cm}}
\lstinputlisting[language=Algo,linewidth=8cm]{3-1-1.algo}
	&
\lstinputlisting[linewidth=8cm,language=ARM]{3-1-1.s}
\end{tabular}
\section{}
\begin{tabular}{p{6cm}p{6cm}}
\lstinputlisting[language=Algo,linewidth=8cm]{3-2.algo}
	&
\lstinputlisting[linewidth=8cm,language=ARM]{3-2.s}
\end{tabular}
\section{Que fais le programme suivant ? }
\begin{lstlisting}[language=ARM]
	LDR r0,=t
	MOV f1,#111
	STR r1,[r0]
	ADD r1,r0,#4
	MOV r2,#0
tq: CMP r2,#4
	BEQ ftq
	LDR r3,[r0,r2,LSL#2]
	STR r3,[r1],#4
	ADD r2,r2,#1
	B tq
ftq:
\end{lstlisting}
\begin{tabular}{ccccccc}
	NST & r0 & r1 & r2 & r3& @t & @t+4
\end{tabular}
\end{document}






