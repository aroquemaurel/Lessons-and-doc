\documentclass[a4paper]{article}
\usepackage{xltxtra} % charge aussi fontspec et xunicode, nécessaires...
\usepackage{listings}
\usepackage[frenchb]{babel}

\begin{document}
Bla. Héhé\dots
\begin{lstlisting}[language={[LaTeX]TeX}]
\begin{test}
\une\macro % avec des commentaires accentués
\une\autre\bizarreté % ça marche !
\end{test}
\end{lstlisting}
Bla.
\end{document}

